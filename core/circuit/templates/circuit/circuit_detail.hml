{% extends "core/core_base.html" %}

{% block head %}
    <script src="{{ MEDIA_URL }}javascripts/jquery.tablesorter/jquery.tablesorter.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".tablesorter").tablesorter();
        });
    </script>
{% endblock %}

{% block content %}
    <div class='dns-title'><h3>{{ circuit.circuit_id }}</h3></div>


    {% block action_bar %}
        {% if circuit.get_edit_url %}
            <a class="btn btn-primary" href="{{ circuit.get_edit_url() }}">Edit</a>
        {% endif %}

        {% block mid_action_bar %}
        {% endblock %}

        {% if circuit.get_delete_url %}
            <a class="btn btn-danger" href="{{ circuit.get_delete_url() }}">Delete</a>
        {% endif %}
    {% endblock %}

        <div>
            {% from 'core/core_macros.html' import display_details %}
            <div style='float:left;'>
                {{ display_details(circuit.details(), obj=circuit) }}
            </div>

            <div style='float:left; margin-left: 3em;'>
                {% from 'core/core_macros.html' import display_kv %}
                {{ display_kv(attrs, store_name='Circuit Meta Data', obj=circuit, kv_type='Circuit', caption='Circuit Attributes') }}
            </div>
        </div>


        <div style='float:left;'>
        <table class="tablesorter">
            <thead>
                <tr>
                    <th>A Site (<a href="{{ circuit.a_site.get_absolute_url() }}">{{ circuit.a_site }}</a>)</th>
                    <th>Z Site (<a href="{{ circuit.z_site.get_absolute_url() }}">{{ circuit.z_site }}</a>)</th>
                </tr>
            </thead>

            <tbody>
                {% for (a_n, z_n) in site_networks %}
                <tr>
                    <td>
                        {% if a_n %}
                            <a href='{{ a_n.get_absolute_url() }}'>{{ a_n }}</a>
                        {% endif %}
                    </td>
                    <td>
                        {% if z_n %}
                            <a href='{{ z_n.get_absolute_url() }}'>{{ z_n }}</a>
                        {% endif %}
                    </td>

                </tr>
                {% endfor %}
            </tbody>
        </table>
        </div>

{% endblock %}
